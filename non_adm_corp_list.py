

### 코스피 비관리종목 200개 가지고오기


import pandas as pd

code = ['A005690', 'A058860', 'A032350', 'A005030', 'A012510', 'A227840',
       'A006650', 'A009140', 'A002870', 'A009770', 'A025000', 'A072130',
       'A024900', 'A000970', 'A000760', 'A079430', 'A013700', 'A004970',
       'A092230', 'A018670', 'A014280', 'A012320', 'A093230', 'A298690',
       'A015020', 'A000490', 'A013870', 'A034120', 'A000040', 'A268280',
       'A010690', 'A006570', 'A005880', 'A003850', 'A002070', 'A023000',
       'A102460', 'A090350', 'A014910', 'A006390', 'A003690', 'A015230',
       'A033780', 'A008500', 'A069730', 'A138040', 'A058430', 'A012160',
       'A001740', 'A068400', 'A001940', 'A033660', 'A293480', 'A002820',
       'A003530', 'A004690', 'A010620', 'A078930', 'A071950', 'A034220',
       'A005870', 'A088790', 'A143210', 'A005500', 'A088260', 'A005800',
       'A095720', 'A185750', 'A009540', 'A064960', 'A002410', 'A012280',
       'A001520', 'A004560', 'A004540', 'A086280', 'A023350', 'A028100',
       'A000540', 'A024090', 'A093050', 'A084680', 'A172580', 'A001250',
       'A002320', 'A204210', 'A007590', 'A015590', 'A002170', 'A001120',
       'A010660', 'A139130', 'A035000', 'A112610', 'A010060', 'A011200',
       'A044450', 'A006280', 'A017940', 'A000480', 'A008970', 'A002200',
       'A005420', 'A015860', 'A033180', 'A264900', 'A010040', 'A102260',
       'A002900', 'A009070', 'A071090', 'A005950', 'A002270', 'A104700',
       'A020120', 'A000120', 'A004840', 'A009420', 'A006370', 'A001060',
       'A006060', 'A025540', 'A006880', 'A004250', 'A071840', 'A058650',
       'A005180', 'A017670', 'A005190', 'A017180', 'A010600', 'A081000',
       'A004710', 'A016610', 'A034020', 'A001270', 'A032830', 'A057050',
       'A079980', 'A014680', 'A001790', 'A006980', 'A298020', 'A031820',
       'A001430', 'A000230', 'A004910', 'A102280', 'A004150', 'A009240',
       'A000300', 'A006090', 'A003070', 'A004360', 'A111770', 'A002920',
       'A004170', 'A023530', 'A010130', 'A084010', 'A004430', 'A004270',
       'A008700', 'A214320', 'A010140', 'A000860', 'A195870', 'A120030',
       'A026940', 'A015890', 'A011390', 'A035250', 'A001070', 'A009310',
       'A063160', 'A004090', 'A138250', 'A036530', 'A000520', 'A194370',
       'A000880', 'A030720', 'A069460', 'A016580', 'A170900', 'A008260',
       'A005810', 'A072710', 'A044380', 'A005830', 'A003520', 'A229640',
       'A226320', 'A204320', 'A298050', 'A003350', 'A008040', 'A006800',
       'A020000', 'A163560']
afraccyear = "2019"
atoaccyear = "2019"

df2 = pd.DataFrame()

for i in range(0, 200):
    acode = code[i]

    json_url = "http://www.fnspace.com/Api/FinanceApi?key=34868A3196DDF56BFE35&format=json&code=" + acode + "&item=M111000,M122700,M131000,M221000,M222000,M113000,M121500,M231000&consolgb=M&annualgb=A&fraccyear=" + afraccyear + "&toaccyear=" + atoaccyear

    print(json_url)

    dsf_data = pd.read_json(json_url)
    df = pd.DataFrame(dsf_data["dataset"][0]["DATA"])

    df2 = df2.append(df)

    print(df2)

df2.to_csv("non_adm_corp22222.csv", mode='w')
